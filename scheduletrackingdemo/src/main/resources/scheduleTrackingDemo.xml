<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/util
            http://www.springframework.org/schema/util/spring-util-3.0.xsd">

	<import resource="classpath:applicationSchedulerTrackingAPIBundle.xml" />
	<import resource="classpath:applicationOpenMrsWSBundle.xml" />
	<import resource="classpath:voxeoResources.xml" />
	<import resource="applicationCmsLiteApi.xml" />
	<import resource="applicationSmsHttpBundle.xml" />
	<import resource="classpath:applicationMobileFormsAPI.xml" />
	<import resource="applicationOutboxAPI.xml" />

	<util:properties id="scheduleMessages"
		location="classpath:schedulemessages.properties" />

	<bean class="org.motechproject.scheduletrackingdemo.FormValidatorRegister" />
	
	<bean class="org.motechproject.scheduletrackingdemo.validator.PatientRegistrationValidator" />
		
	<bean class="org.motechproject.scheduletrackingdemo.validator.PatientEnrollmentValidator" />
	
	<bean class="org.motechproject.scheduletrackingdemo.validator.PatientEncounterValidator" />

	<bean class="org.motechproject.scheduletrackingdemo.listeners.MobileFormListener" />

	<bean class="org.motechproject.scheduletrackingdemo.PatientScheduler" />

	<bean id="patientMRSDatabase" class="org.ektorp.impl.StdCouchDbConnector">
		<constructor-arg value="patientsMRS" />
		<constructor-arg ref="couchDbInstance" />
	</bean>

	<bean id="patientMRSDAO"
		class="org.motechproject.scheduletrackingdemo.DAO.MRSPatientsCouchDBDAOImpl">
		<constructor-arg ref="patientMRSDatabase" />
	</bean>

	<bean id="smsService" class="org.motechproject.sms.api.service.SmsServiceImpl">
		<constructor-arg ref="messageSplitter" />
	</bean>

	<bean id="messageSplitter" class="org.motechproject.sms.api.MessageSplitter">
	</bean>

	<!-- For bootstrapping content at server startup -->
	<bean id="scheduleContentInitiator"
		class="org.motechproject.scheduletrackingdemo.DAO.ScheduleContentInitiator"
		init-method="bootstrap">
	</bean>

	<bean id="milestoneListener"
		class="org.motechproject.scheduletrackingdemo.listeners.MilestoneListener" />

	<bean id="callResultListener"
		class="org.motechproject.scheduletrackingdemo.listeners.CallResultListener" />

	<bean class="org.motechproject.scheduletrackingdemo.OpenMrsClientImpl" />

	<context:annotation-config />

	<context:component-scan base-package="org.motechproject.mobileforms.api.web" />
	<context:component-scan base-package="org.motechproject.scheduletrackingdemo.controllers" />

	<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
		<property name="order" value="1" />
	</bean>

	<bean id="controllerClassNameUrlMapping"
		class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping">
		<property name="order" value="2" />
		<property name="includeAnnotatedControllers" value="false" />
	</bean>

	<bean name="voxeoController" class="org.motechproject.server.voxeo.web.IvrController">
	</bean>

	<bean name="enrollmentController"
		class="org.motechproject.scheduletrackingdemo.controllers.EnrollController">
	</bean>

	<bean name="patientController"
		class="org.motechproject.scheduletrackingdemo.controllers.PatientController">
	</bean>

	<bean name="outboxController"
		class="org.motechproject.server.outbox.web.VxmlOutboxController">
	</bean>


	<bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="prefix" value="/webapp/" />
		<property name="suffix" value=".jsp" />
		<property name="viewClass"
			value="org.motechproject.scheduletrackingdemo.BundledJspView" />
	</bean>

</beans>